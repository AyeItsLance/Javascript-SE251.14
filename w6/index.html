<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <form action="https://se251-node.herokuapp.com/w6" method="POST">
        <label for="first">First Name</label>
        <input type="text" id="first" name="first" title="Input your first name" placeholder="First Name" message="Do it right!" required oninvalid="this.setCustomValidity('Enter User Name Here')" oninput="this.setCustomValidity('')"/>

        <input type="text" id="last" name="last" title="Input your last name" placeholder="Last Name" message="Do it right!" required oninvalid="this.setCustomValidity('Enter Last Name Here')" oninput="this.setCustomValidity('')"/>

        <br>


        


        <input type="email" name="email" required placeholder="Email">
        <input type="email" required placeholder="Email Confirm">
        
        

        <button type="submit" >Submit</button>
    </form>
    

    <script>

        

        document.addEventListener("DOMContentLoaded", function() {
        var elements = document.getElementById("first");
        
            elements.oninvalid = function(e) {

                e.target.setCustomValidity("");

                if (!e.target.validity.valid) {

                    e.target.setCustomValidity("Please enter in a First Name");
                }
            };

            elements.oninput = function(e) {

                e.target.setCustomValidity("");
            };
        
        })



        document.addEventListener("DOMContentLoaded", function() {
        var elements = document.getElementById("last");
        
            elements.oninvalid = function(e) {

                e.target.setCustomValidity("");

                if (!e.target.validity.valid) {

                    e.target.setCustomValidity("Please enter in a Last Name");
                }
            };

             elements.oninput = function(e) {

                e.target.setCustomValidity("");
            };
        
        })

    




        var myForm = document.querySelector("form")

        myForm.addEventListener('change' , myFunction)

        function myFunction(e) {
            
            e.preventDefault()

            var input = document.querySelectorAll(`input[type="email"]`);

            if(input[0].value === input[1].value || input[1].value === input[0].value){

                document.querySelector('button[type="submit"]').disabled = false;
                
                e.target.style.backgroundColor=`white`


                var firstLabel = document.getElementById(`first`)

                firstLabel.value = firstLabel.value.toUpperCase()


                var lastLabel = document.querySelector(`#last`)

                lastLabel.value = lastLabel.value.toUpperCase()


                var emailUpper = document.querySelector(`input[type="email"]`)

                emailUpper.value = emailUpper.value.toUpperCase()

                e.target.style.backgroundColor=`white`

                

                var submit = document.querySelector('button[type="submit"]')

                submit.addEventListener('click', (e)=>{


                    document.querySelector("form").submit();


                })
    
            }

            else
            {

                document.querySelector('button[type="submit"]').disabled = true;
                

                e.target.setCustomValidity(`Your email address doesn't match!`)

                e.target.reportValidity()

                input[1].style.backgroundColor=`red`

                
                
            }


            
        }

        


        
        




        



        




        

        



    </script>
</body>
</html>